{% raw %}
<!DOCTYPE HTML>
<html>
    <head>
        <title>| demo |</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.0.5/vue.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/vue-resource/1.3.4/vue-resource.min.js"></script>
        <style type="text/css">
BODY {
    margin: 10;
    font-family: "Trebuchet MS", Geneva, sans-serif;
}
DIV.demo {
    margin: 10px auto;
    border: 1px solid red;
}
TABLE {
    margin: 5px;
    border: 1px solid #888;
    min-width: 800px;
}
TH {
    background-color: #444;
    color: #fff;
    font-weight: bold;
    text-align: left;
    padding: 5px;
    font-size: 0.85em;
}
TD {
    border: 1px solid #777;
    padding: 5px;
    text-align: center;
    font-size: 0.8em;
}
        </style>
    </head>
    <body>
        <form id="demo" v-cloak>
            <div class="foo">
                <input type="text" v-model="queryString" placeholder="Search"/>
            </div>
            <table cellpadding=0 cellspacing=0 border=0>
                <tr>
                    <th>Flight#</th>
                    <th>Year</th>
                    <th>Rocket</th>
                    <th>Type</th>
                    <th>Success</th>
                    <th>Patch</th>
                    <th>Details</th>
                </tr>
                <tr v-for="launch in ajaxLaunches">
                    <td>{{ launch.flight_number }}</td>
                    <td>{{ launch.launch_year }}</td>
                    <td>{{ launch.rocket.rocket_name }}</td>
                    <td>{{ launch.rocket.rocket_type }}</td>
                    <td>{{ launch.launch_success }}</td>
                    <td><a target="_new" v-bind:href="launch.links.mission_patch"><img width="50px" v-bind:src="launch.links.mission_patch" /></a></td>
                    <td style="text-align: left">{{ launch.details }}</td>
                </tr>
            </table>
        </form>
        <script type="text/javascript">
var demo = new Vue({
    el: '#demo',
    data: {
        queryString: '',
        lastQuery: '',
        searchResults: []
    },
    computed: {
        ajaxLaunches: function() {
            var query = this.queryString;

            if (query && query != this.lastQuery) {
                this.$http.get('/api/v1/launches', {'params': {'q': query}}).then(function(response) {
                    this.searchResults = response.data.launches;
                    console.log(this.searchResults);
                });
                this.lastQuery = query;
            } else if (!query) {
                this.searchResults = [];
            }

            res = this.searchResults;

            return res;
        }
    }
});
        </script>
    </body>
</html>
{% endraw %}
